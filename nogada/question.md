다음은 Azure 클라우드 기반으로 MSA(Microservices Architecture) 아키텍처를 구축하기 위한 설계 방안에 대한 테스트 문제입니다. 이 테스트는 요구사항 정의, 시스템 용량 산정, 컨테이너 상세 설계 역량을 검증하며, 시스템 구축 및 운영 비용 절감을 위한 아키텍처 개선 요건을 포함하고 있습니다.

# **요구사항**
1. **비즈니스 요구사항**
   1. 특정 서비스는 24/7 무중단 운영이 필요하며, 신규 시스템으로 전환되기 전까지 기존 시스템이 계속 운영되어야 합니다.
   2. 신규 시스템의 각 서비스는 독립적으로 배포 가능해야 하며, 실패 시 롤백이 용이해야 합니다.
   3. 기존 시스템과 신규 시스템 간의 데이터 동기화가 필수적이며, 데이터 일관성을 유지해야 합니다.
   4. 새로운 기능 개발은 신규 시스템에서 이루어지며, 단계적으로 기존 시스템에서 마이크로서비스로 전환되어야 합니다.
   5. 시스템의 확장성이 중요하며, 트래픽 증가 시 자동으로 리소스를 확장할 수 있어야 합니다.
   6. 운영 비용 절감이 중요하며, 피크 시간대 이외에는 리소스 사용을 최소화해야 합니다.

2. **기술 요구사항**
   1. 각 서비스는 컨테이너로 패키징되어 Azure Kubernetes Service(AKS) 위에서 동작해야 합니다.
   2. 서비스 간 통신은 Azure Service Bus 또는 Azure API Management를 통해 이루어져야 합니다.
   3. Azure Monitor와 Azure Application Insights를 통해 서비스의 상태를 모니터링하고, 문제 발생 시 즉시 알림을 받을 수 있어야 합니다.
   4. 서비스의 배포는 CI/CD 파이프라인(Azure DevOps 또는 GitHub Actions)을 통해 자동화되어야 합니다.
   5. 각 노드의 리소스(CPU, 메모리)를 효율적으로 사용하기 위해 적절한 Node Size를 설계해야 합니다.
   6. 각 마이크로서비스를 수용할 수 있는 최적의 Application Pod 사이즈를 설계하여, 시스템의 성능을 최적화하고 비용을 절감해야 합니다.
   7. NodeGroup은 서비스의 특성과 요구사항에 맞춰 효율적으로 구성되어야 합니다.
   8. 노드의 확장 및 축소는 자동화되어야 하며, 피크 시간대에 대응할 수 있어야 합니다.
   9. 노드/Pod 실패 시 자동 복구가 가능해야 합니다.

3. **비용 최적화 요구사항**
   1. 시스템 구축 및 운영 비용 절감을 위해 서버리스 서비스(예: Azure Functions)와 비용 절감형 저장소(예: Azure Blob Storage, Azure SQL Serverless) 사용을 고려해야 합니다.
   2. 피크 시간대를 제외하고는 최소한의 리소스만 사용하도록 설정해야 합니다.
   3. 리소스 사용을 최적화하여 비용을 최소화해야 합니다.
   4. 필요에 따라 다양한 VM 크기와 유형을 활용해야 합니다.
   5. 불필요한 데이터 전송 비용을 줄이기 위해 서비스의 데이터와 로직을 최대한 지역적으로 배치해야 합니다.

4. **시스템 용량산정**
   1. 예상되는 최대 동시 접속자는 10,000명이며, 평균 응답 시간은 200ms 이내여야 합니다.
   2. 각 서비스는 평균적으로 2,000 TPS(Transactions Per Second)를 처리할 수 있어야 합니다.
   3. 특정 서비스는 파일 업로드 기능을 제공하며, 하루에 10GB 이상의 파일이 업로드될 것으로 예상됩니다.

