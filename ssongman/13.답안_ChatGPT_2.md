

# < ChatGPT 질의내용 >

회사에서 Close 관련 내용으로 시험을 준비하고 있어.

첨부한 파일은 샘플 문제인데 분석해서 요구사항을 분석해서 상세 설계 및 아키텍처를 제시해줘.





# < ChatGPT 답변내용 >



### 문제 분석 및 요구사항 정리

파일에서 추출한 내용에 따라, 요구사항을 다음과 같이 정리할 수 있습니다.

#### 1. 고객 상황 및 시스템 요건
- **고객 상황**:
  - 모든 시스템을 Public Cloud에 구축 중이며, Multi Account 기반의 Landing Zone으로 구성되어 있음.
  - 비용 효율적인 시스템 구축 필요.
  - 전 세계 고객 대상 서비스 제공 계획 (멀티 리전 구축 고려 중).
  - Cloud Native 기반으로 유연하고 빠르게 서비스 확장 가능하도록 설계.
  - ISMS 인증 준비 중.

- **시스템 요건**:
  - **Market**: 메인 시스템, 회원, 상품, 구매 기능 담당.
  - **Notification**: 메일/문자 발송 시스템, 다른 시스템 콜 필요.
  - **Event**: 이벤트 기능, 높은 트래픽과 변화량 대응 필요.
  - **Metaverse**: 3rd party 인터페이스 제공, 트래픽 변화 가능성 있음.
  - **Admin**: 관리자 시스템, 특정 IP 대역만 접근 허용, 허용된 시스템만 통신 가능.

#### 2. 요구 사항
- 글로벌 서비스 제공, 전 세계 사용자 대상 빠른 서비스 제공.
- 프론트엔드: SPA (Single Page Application), 백엔드: Spring Boot.
- 프론트엔드와 백엔드는 다른 서브 도메인을 사용.
- MSA (Microservices Architecture) 구성, 시스템 간 부하 영향 최소화.
- 이벤트로 인한 트래픽 변화가 메인 시스템에 영향을 주어서는 안 됨.
- 모든 시스템은 Kubernetes(K8s) 상에서 운영.
- ISMS 인증을 고려한 시스템 구성.



### 상세 설계 및 아키텍처 제안

#### 1. **단일 리전 구성**
- **리전 선택**: Azure에서 전 세계적으로 빠른 접근이 가능한 리전을 선택합니다. 예를 들어, 사용자가 많은 지역의 Azure 리전을 선택하여 서비스 제공합니다.
- **가용성 영역(Availability Zones)**: 단일 리전 내에서 가용성 영역을 활용하여 고가용성을 보장합니다. 각 주요 서비스(예: 가상 머신, 데이터베이스 등)를 여러 가용성 영역에 분산 배치하여 장애 발생 시에도 서비스 지속성을 유지합니다.

#### 2. **아키텍처 구성**

- **프론트엔드**:
  - **Azure Static Web Apps**를 사용하여 SPA를 호스팅합니다.
  - **Azure Front Door**를 사용하여 전 세계적으로 빠른 접근이 가능하도록 설정하고, 프런트엔드와 백엔드를 다른 서브 도메인으로 분리하여 배포 (`frontend.domain.com` 및 `api.domain.com`).

- **백엔드**:
  - Spring Boot 애플리케이션을 컨테이너화하여 **Azure Kubernetes Service(AKS)**에 배포합니다.
  - 서비스 간 부하 분산 및 트래픽 관리에 **Azure Application Gateway** 또는 **Azure Front Door**를 사용합니다.
  - 마이크로서비스 간의 트래픽 제어와 모니터링을 위해 **Azure Service Mesh**를 활용할 수 있습니다.

- **데이터베이스**:
  - **Azure SQL Database** 또는 **Azure Cosmos DB**를 사용하여 데이터베이스를 단일 리전 내에서 고가용성으로 구성합니다.
  - 가용성 영역에 복제본을 두어 데이터베이스의 읽기 성능과 가용성을 최적화합니다.

- **Event System**:
  - **Azure Event Grid** 또는 **Azure Service Bus**를 사용하여 이벤트 기반 아키텍처를 구성하고, 비동기 이벤트 처리를 통해 트래픽 스파이크에 대응합니다.
  - 이벤트 처리 로직은 **Azure Functions**를 사용하여 서버리스 환경에서 필요에 따라 자동으로 확장됩니다.

- **Notification System**:
  - **Azure Logic Apps**를 사용하여 메일 및 문자 메시지 발송을 관리하며, 외부 API와의 통합도 용이합니다.
  - **Azure Service Bus**를 통해 트래픽을 관리하고, 비동기 메시징을 활용하여 시스템 간 의존성을 최소화합니다.

- **Admin System**:
  - **Azure Virtual Network** 및 **Network Security Groups (NSG)**를 사용하여 특정 IP 대역에서만 접근 가능하도록 네트워크 보안을 설정합니다.
  - 관리 시스템은 **Azure Bastion**을 통해 안전하게 관리할 수 있으며, 허용된 시스템 간의 통신만 허용하도록 설정합니다.

#### 3. **ISMS 인증 준비**
- **접근 제어 및 로깅**:
  - **Azure Monitor** 및 **Azure Log Analytics**를 사용하여 모든 시스템의 접근 로그를 중앙화하고, 실시간 모니터링을 구현합니다.
  - **Azure Active Directory(AAD)**를 통해 역할 기반 접근 제어(RBAC)를 설정하고, 다중 인증(MFA)을 적용합니다.

- **데이터 보호**:
  - 데이터베이스 및 스토리지 계정의 데이터를 **Azure Storage Service Encryption**과 **Azure SQL TDE(Transparent Data Encryption)**를 통해 암호화합니다.
  - 중요한 데이터에 대한 접근 권한 관리는 **Azure Key Vault**를 통해 안전하게 관리합니다.

- **백업 및 복구**:
  - **Azure Backup**을 사용하여 정기적인 백업을 수행하고, 단일 리전 내에서 여러 가용성 영역에 백업 데이터를 저장합니다.
  - **Azure Site Recovery**를 설정하여 복구 시나리오를 마련하고, 장애 발생 시 자동으로 페일오버할 수 있도록 준비합니다.

#### 4. **비용 효율화**
- **자동 스케일링**:
  - **Azure Kubernetes Service(AKS)**의 자동 스케일링 기능을 활성화하여 트래픽 증가 시 자동으로 노드를 확장하고, 사용량이 줄어들면 자원을 축소합니다.
  
- **서버리스 옵션 사용**:
  - 트래픽이 변동적인 서비스는 **Azure Functions**와 **Azure Logic Apps**를 활용하여 비용을 절감하면서도 필요 시 확장이 가능합니다.

- **리소스 최적화**:
  - **Azure Reserved VM Instances**를 활용하여 장기적인 비용 절감 전략을 세웁니다.
  - **Azure Cost Management**를 통해 지속적으로 비용을 모니터링하고, 최적화할 수 있는 부분을 식별하여 리소스를 효율적으로 사용합니다.

### 결론

수정된 설계는 Azure 기반으로 단일 리전 내에서 가용성 영역을 활용하여 고가용성 및 성능을 보장하며, ISMS 인증 요구 사항을 충족할 수 있는 클라우드 네이티브 아키텍처를 제공합니다. 이 아키텍처는 비용 효율성을 유지하면서도 글로벌 사용자에게 안정적이고 빠른 서비스를 제공할 수 있도록 설계되었습니다. Azure의 다양한 관리 및 보안 서비스를 활용하여 보안성과 확장성을 확보할 수 있습니다.