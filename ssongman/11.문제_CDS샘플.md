# 심층서술형문제(CDS)

---

# 1. 과제 제시

## 1) 고객 상황 및 시스템 요건

Z사는 Creator들이 마켓에서 그림, 영상 등을 NFT(Non-fungible-token)화하고 거래할 수 있는 플랫폼을 구축하고자 한다.

### [고객 상황]

- on-premise에 시스템이 존재하지 않아 모든 시스템을 Public Cloud에 구축을 진행하고 있다. 현재 Multi Account 기반의 Landing Zone으로 구성되어 있는 상황이다.
- 처음 진행하는 사업으로 투자금은 있으나 시장 상황을 고려하여 비용 효율적인 시스템을 구축하고자 한다.
- 전 세계 고객을 대상으로 서비스를 제공하고자 하며 멀티 리전으로 구축할지 고민하고 있다.
- 유연하고 빠르게 서비스 확장을 하기 위해 Cloud Native 기반으로 구축하고자 계획을 세우고 있다.
- 가상 자산 시스템 사업자 자격 취득을 위해서 ISMS 인증을 시스템 구축부터 준비하고 있다.

### [시스템 요건]

| 시스템(서비스) | 시스템 설명                                                  |
| -------------- | ------------------------------------------------------------ |
| Market         | 메인 시스템으로 회원, 상품, 구매 등 주요 기능을 담당한다.    |
| Notification   | 메일/문자메시지 발송을 위한 시스템. 다른 시스템 콜을 이용한 인터페이스가 필요하다. |
| Event          | 이벤트 기능을 담당하며 이벤트 진행 시 높은 트래픽과 변화량에 대응할 수 있어야 한다. |
| Metaverse      | 3rd party가 개발하는 영역과 인터페이스를 제공하는 시스템으로 3rd party 사용자에 따라서 트래픽이 변할 수 있다. |
| Admin          | 관리자 시스템으로 특정 IP 대역의 관리자만이 접근해야 하며 허용된 시스템만 통신되어야 한다. |

---

## 2) 아키텍처 설계도

[Landing zone 아키텍처]

< 그림 생략 >



| Account                                                      | 설명                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| Network                                                      | 관문 Account로 WAF/UTM 등 보안 장비 등이 설치되는 계정이며 Public Traffic에 대한 제어를 하고 있다. |
| Shared	IAM, Logging Account 역할을 하고 있으며 DevOps 환경 및 보안 장비 등을 설치한다. |                                                              |
| DEV/STG/PRD	개발/검증/운영 Application이 설치되는 Account이다. |                                                              |



## 3) 요구 사항

- 글로벌 고객을 대상으로 서비스를 진행하고자 하며 전 세계 사용자에게 빠르게 서비스를 제공할 수 있도록 구성되어야 한다.
- 프론트엔드는 SPA(single page application), 백엔드는 Spring Boot를 이용한다.
- 프론트엔드와 백엔드는 다른 서브 도메인을 사용해야 한다.
- MSA로 구성 중이며 시스템 간에 부하로 인한 영향도는 최소화되어야 하며 NFT 판매 이벤트 등으로 인한 트래픽 변화가 메인 시스템에 영향을 주어서는 안 된다.
- 모든 시스템은 Kubernetes에 올라가며 Application은 stateless하게 구성되어야 한다.
- 비용 및 관리 최소화를 위해 단일 클러스터로 구성하고자 하며 시스템별로 Namespace를 생성하여 관리해야 한다.
- Kubernetes는 2개 이상의 서브넷으로 구성되어야 한다.
- 
- 장애나 배포 등의 상황에서도 서비스는 항상 50% 이상의 가용성을 유지해야 한다.
- 빠른 CS 대응을 위해서 Application 로그는 준실시간으로 수집되어야 하며, 로그를 쉽게 조회할 수 있는 환경을 제공하여야 한다.
- Application 로그에 대한 보관 정책이 있어야 하며 비용 최적화를 고려하여 단기/장기 보관에 대한 설계가 이루어져야 한다.
- Application에서 에러 발생 시 SMS, MAIL, SLACK 등을 통해서 담당자에 알람이 전송되어야 한다.



# 2. 문제

## 1) 요구 사항 충족을 위한 상세 설계 및 구축 방안

고객 상황 및 요구사항 등을 참고하여 다음 질문에 답하시오.(CSP 업체는 Azure로 한다.)



### [문제 1] 글로벌 서비스 제공을 위해 필요한 아키텍처 대안 제시

글로벌 서비스를 위해서 멀티 리전과 단일 리전 구성을 고민하던 중, 데이터 동기화 등 기술 문제, 서비스 오픈 일정, 비용 문제로 단일 리전 구성으로 결정하였다.
아키텍처 현황을 참고하여 단일 리전으로 글로벌 서비스 제공 시 필요한 아키텍처 구성 요소와 예상되는 고려 사항 (CORS, API별 cache 적용 방안 등) 을 포함하여 상세 구축 방안을 작성하시오.

