# 요구사항

* Azure 에서 이벤트처리



# 1. Azure Event 처리 서비스

Azure에서 이벤트 처리를 위한 주요 서비스는 다음과 같습니다.



1. **Azure Event Hubs**:
   - 대규모 데이터 스트림을 실시간으로 수집하고 처리하기 위한 이벤트 스트리밍 플랫폼입니다. IoT 데이터, 로그 수집, 실시간 분석에 적합합니다.
   - **특징**: 고성능 이벤트 스트리밍 플랫폼, 초당 수백만 개의 이벤트 처리 가능, 실시간 분석에 적합.
   
2. **Azure Event Grid**:
   - 이벤트 기반 아키텍처를 구현하기 위한 서비스로, 다양한 소스에서 발생한 이벤트를 구독자에게 실시간으로 라우팅합니다. 서버리스 컴퓨팅과의 통합이 용이합니다.
   - **특징**: 이벤트 라우팅 및 배포 서비스, 다양한 소스에서 이벤트를 수집하고 구독자에게 전달, 서버리스 통합 용이.
   
3. **Azure Service Bus**:
   - 안정적인 메시지 큐잉과 게시/구독(pub/sub) 기능을 제공하는 메시지 브로커로, 시스템 간 비동기 메시징에 적합합니다.
   - **특징**: 안정적인 메시지 큐 및 게시/구독 시스템, 트랜잭션 및 복잡한 메시지 처리 지원, FIFO 및 지연 메시징 가능.
   
4. **Azure Logic Apps**:
   - 코드 없이 워크플로우를 자동화할 수 있는 서비스로, 이벤트 기반 처리를 포함하여 다양한 시나리오를 처리할 수 있습니다.
   - **특징**: 워크플로우 자동화 도구, 코드 없이 이벤트 기반 프로세스 구축, 다양한 커넥터 제공.
   
5. **Azure Functions**:
   - 서버리스 컴퓨팅 환경에서 작은 코드 조각(함수)을 실행하여 이벤트를 처리하는 서비스입니다. 다양한 이벤트 소스와 통합하여 자동으로 확장 가능합니다.
   - **특징**: 서버리스 함수 실행, 이벤트에 응답하여 자동 확장, 다양한 언어 지원 및 이벤트 소스와 통합.





# 2. Azure Event Hubs

## 1) Event Hubs

Azure Event Hubs는 모든 원본에서 모든 대상으로 대기 시간이 짧은 초당 수백만 개의 이벤트를 스트리밍할 수 있는 클라우드의 네이티브 데이터 스트리밍 서비스입니다. 

Event Hubs는 Apache Kafka와 호환됩니다. 

코드 변경 없이 기존 Kafka 워크로드를 실행할 수 있습니다.



## 2) Kafka 비교

Azure에서 Kafka와 유사한 서비스는 **Azure Event Hubs**입니다. 이 두 서비스의 주요 차이점과 유사점을 비교해 보겠습니다.



### 1. **용도 및 목적**
- **Apache Kafka**: 분산 스트리밍 플랫폼으로, 대규모 데이터 스트리밍, 로그 수집, 실시간 분석 등에 사용됩니다. 메시지를 주고받는 데 최적화된 시스템입니다.
- **Azure Event Hubs**: 클라우드에서의 이벤트 스트림 처리 플랫폼으로, 대규모 이벤트 데이터 스트림을 수집하고 처리하기 위해 설계되었습니다. Kafka와 유사하게 스트리밍 데이터를 실시간으로 처리합니다.

### 2. **관리 및 운영**
- **Kafka**: 사용자에게 더 큰 유연성을 제공하지만, 설치, 구성, 유지 관리 등 많은 관리 작업이 필요합니다. 클러스터 관리와 스케일링도 사용자가 직접 해야 합니다.
- **Azure Event Hubs**: 완전 관리형 서비스로, 설치나 유지 관리가 필요 없습니다. 자동으로 스케일링되며, Azure에서 관리하므로 관리 부담이 적습니다.

### 3. **확장성**
- **Kafka**: 수평적 확장성이 뛰어나며, 대규모 데이터 스트림 처리에 적합합니다. 브로커를 추가함으로써 클러스터를 확장할 수 있습니다.
- **Azure Event Hubs**: 매우 높은 확장성을 제공하며, 초당 수백만 개의 이벤트를 처리할 수 있습니다. Event Hubs는 기본적으로 확장성이 뛰어나고, 필요한 경우 쉽게 확장할 수 있습니다.

### 4. **통합**
- **Kafka**: 다양한 오픈 소스 및 상용 툴과 통합할 수 있습니다. 커넥터, 스트림 프로세싱 라이브러리 등을 통해 광범위한 통합이 가능합니다.
- **Azure Event Hubs**: Azure의 다른 서비스(예: Azure Stream Analytics, Azure Functions, Azure Logic Apps)와 원활하게 통합되며, Azure 내에서 이벤트 기반 아키텍처를 쉽게 구축할 수 있습니다.

### 5. **프로토콜 및 API**
- **Kafka**: 기본적으로 TCP 기반의 Kafka 프로토콜을 사용하며, 다양한 언어에서 지원되는 클라이언트를 제공합니다.
- **Azure Event Hubs**: Kafka 프로토콜을 지원하므로, Kafka 클라이언트를 사용하여 Event Hubs와 통신할 수 있습니다. 또한, HTTP 기반의 Azure SDK를 통해서도 접근할 수 있습니다.

### 6. **사용 사례**
- **Kafka**: 복잡한 데이터 파이프라인 구축, 실시간 로그 수집 및 분석, 이벤트 소싱, 메시지 브로커 등 다양한 용도로 사용됩니다.
- **Azure Event Hubs**: IoT 데이터 수집, 실시간 데이터 스트림 분석, 텔레메트리 데이터 수집, 애플리케이션 로그 스트리밍 등에 사용됩니다.

### 결론
- **Kafka**는 유연성과 제어가 필요한 환경에 적합하며, 자체적으로 클러스터를 관리할 수 있는 역량이 있는 경우 유리합니다.
- **Azure Event Hubs**는 관리형 서비스가 필요하고, Azure 환경에서 손쉽게 확장 가능한 스트리밍 솔루션을 원하는 경우에 적합합니다.

두 서비스는 스트리밍 데이터를 처리하는 데 있어 비슷한 기능을 제공하지만, 관리 편의성과 클라우드 환경에 맞춘 최적화에서는 차이가 있습니다.



## 3) 구성도



![Azure Event Hubs가 이벤트 스트리밍 플랫폼에 어떻게 적용되는지 보여 주는 다이어그램.](./51.Kafka관련.assets/event-streaming-platform.png)

참고링크 : https://learn.microsoft.com/ko-kr/azure/event-hubs/event-hubs-about



